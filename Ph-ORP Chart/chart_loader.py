import csv
import json

with open (r'ORP-FC Chart Sorted trimmed.csv', 'rt') as csvfile:
     reader=csv.DictReader(csvfile)
     #d = json.loads(reader)
     chart={}
     for row in reader:
         r={}
         ORP=int(row['ORP'])
         #print('row: {}'.format(row))
         for k,v in row.items():
             if k=='ORP':
                 pass
             else:
                 key=float(k)
                 if v=='':
                     value=0
                 else:
                     value=float(v)
                     r[key]=value
         chart[ORP]=r
     #print(chart)

ch={565: {8.0: 0.365203237, 7.8: 0.353589963, 7.6: 0.357233469, 7.5: 0.341130227, 7.4: 0.33716321, 7.3: 0.333625002, 7.2: 0.33012171, 7.1: 0.326682588, 7.0: 0.323287991, 6.9: 0.318597988, 6.8: 0.314325396, 6.7: 0.31076995}, 570: {8.0: 0.381176187, 7.8: 0.369046499, 7.6: 0.374573545, 7.5: 0.353926868, 7.4: 0.350965227, 7.3: 0.346398366, 7.2: 0.343331909, 7.1: 0.339150991, 7.0: 0.335535194, 6.9: 0.331127594, 6.8: 0.326116521, 6.7: 0.323281217}, 575: {8.0: 0.402610698, 7.8: 0.385473631, 7.6: 0.390471672, 7.5: 0.370220902, 7.4: 0.366278894, 7.3: 0.361271083, 7.2: 0.355481721, 7.1: 0.353114272, 7.0: 0.348190232, 6.9: 0.343377509, 6.8: 0.33834996, 6.7: 0.332423001}, 580: {8.0: 0.420247254, 7.8: 0.404682881, 7.6: 0.404125551, 7.5: 0.388852928, 7.4: 0.381253321, 7.3: 0.376070571, 7.2: 0.37034679, 7.1: 0.366575591, 7.0: 0.361354889, 6.9: 0.357247813, 6.8: 0.351042306, 6.7: 0.34538847}, 585: {8.0: 0.438529325, 7.8: 0.422830868, 7.6: 0.425638899, 7.5: 0.405093933, 7.4: 0.398153719, 7.3: 0.39241141, 7.2: 0.384810073, 7.1: 0.383742372, 7.0: 0.374865505, 6.9: 0.367807256, 6.8: 0.362723549, 6.7: 0.357054272}, 590: {8.0: 0.461144497, 7.8: 0.442276845, 7.6: 0.434112056, 7.5: 0.422013268, 7.4: 0.415337806, 7.3: 0.408726377, 7.2: 0.401741394, 7.1: 0.39599203, 7.0: 0.389871038, 6.9: 0.38197767, 6.8: 0.374793495, 6.7: 0.36748444}, 595: {8.0: 0.484265657, 7.8: 0.462920998, 7.6: 0.453233685, 7.5: 0.437800363, 7.4: 0.433349647, 7.3: 0.425440759, 7.2: 0.418213776, 7.1: 0.411067105, 7.0: 0.404639454, 6.9: 0.396138028, 6.8: 0.390447288, 6.7: 0.382981761}, 600: {8.0: 0.496443889, 7.8: 0.485837915, 7.6: 0.474732476, 7.5: 0.461764891, 7.4: 0.452151369, 7.3: 0.442952521, 7.2: 0.432576774, 7.1: 0.427010853, 7.0: 0.418981842, 6.9: 0.410766258, 6.8: 0.403439765, 6.7: 0.394278481}, 605: {8.0: 0.530902079, 7.8: 0.508558001, 7.6: 0.494548371, 7.5: 0.48105117, 7.4: 0.470767875, 7.3: 0.46228092, 7.2: 0.452047372, 7.1: 0.446190919, 7.0: 0.435643664, 6.9: 0.425946672, 6.8: 0.41686458, 6.7: 0.407813636}, 610: {8.0: 0.545136245, 7.8: 0.531569992, 7.6: 0.518635837, 7.5: 0.501142968, 7.4: 0.492090223, 7.3: 0.481550098, 7.2: 0.472166868, 7.1: 0.462430302, 7.0: 0.452536204, 6.9: 0.442287078, 6.8: 0.432502204, 6.7: 0.421619351}, 615: {8.0: 0.575936428, 7.8: 0.557622719, 7.6: 0.539872583, 7.5: 0.524214517, 7.4: 0.511595288, 7.3: 0.502036332, 7.2: 0.490429728, 7.1: 0.481273496, 7.0: 0.4699898, 6.9: 0.460439191, 6.8: 0.448726433, 6.7: 0.435139099}, 620: {8.0: 0.613451865, 7.8: 0.583805484, 7.6: 0.565636191, 7.5: 0.546109095, 7.4: 0.533725118, 7.3: 0.523923223, 7.2: 0.512642439, 7.1: 0.499614886, 7.0: 0.486602354, 6.9: 0.476348708, 6.8: 0.462829942, 6.7: 0.451916221}, 625: {8.0: 0.62691394, 7.8: 0.612461274, 7.6: 0.586867822, 7.5: 0.573593007, 7.4: 0.556986901, 7.3: 0.545347253, 7.2: 0.530654647, 7.1: 0.51987608, 7.0: 0.506506892, 6.9: 0.492720873, 6.8: 0.483122751, 6.7: 0.4654544}, 630: {8.0: 0.659378587, 7.8: 0.639453032, 7.6: 0.617897925, 7.5: 0.597177236, 7.4: 0.581297469, 7.3: 0.566547985, 7.2: 0.551318454, 7.1: 0.541179914, 7.0: 0.525366305, 6.9: 0.509417297, 6.8: 0.498401841, 6.7: 0.483625425}, 635: {8.0: 0.715647947, 7.8: 0.670655773, 7.6: 0.63842103, 7.5: 0.615887256, 7.4: 0.605064353, 7.3: 0.591609944, 7.2: 0.57603237, 7.1: 0.563343011, 7.0: 0.54501006, 6.9: 0.530125931, 6.8: 0.515381736, 6.7: 0.498404613}, 640: {8.0: 0.726417047, 7.8: 0.701569618, 7.6: 0.66105975, 7.5: 0.642128643, 7.4: 0.631464828, 7.3: 0.617851826, 7.2: 0.59864952, 7.1: 0.585918834, 7.0: 0.567234703, 6.9: 0.54808675, 6.8: 0.535906797, 6.7: 0.515621285}, 645: {8.0: 0.762930378, 7.8: 0.736330019, 7.6: 0.692160397, 7.5: 0.682986585, 7.4: 0.659119464, 7.3: 0.642117049, 7.2: 0.624654899, 7.1: 0.605557328, 7.0: 0.587019592, 6.9: 0.568386727, 6.8: 0.549216183, 6.7: 0.533947076}, 650: {8.0: 0.805728595, 7.8: 0.768337637, 7.6: 0.734714395, 7.5: 0.706965436, 7.4: 0.687763372, 7.3: 0.668108324, 7.2: 0.646303032, 7.1: 0.628709635, 7.0: 0.61217215, 6.9: 0.589642213, 6.8: 0.57476346, 6.7: 0.548103803}, 655: {8.0: 0.870992745, 7.8: 0.806318761, 7.6: 0.759809172, 7.5: 0.743334157, 7.4: 0.718014311, 7.3: 0.695178951, 7.2: 0.672579801, 7.1: 0.654624629, 7.0: 0.631974869, 6.9: 0.612451847, 6.8: 0.587277065, 6.7: 0.572026762}, 660: {8.0: 0.91156, 7.8: 0.846047248, 7.6: 0.802625927, 7.5: 0.772821935, 7.4: 0.749081444, 7.3: 0.725690166, 7.2: 0.70040486, 7.1: 0.679998519, 7.0: 0.659653245, 6.9: 0.634485298, 6.8: 0.614363016, 6.7: 0.588438597}, 665: {8.0: 0.938906811, 7.8: 0.895246616, 7.6: 0.826026051, 7.5: 0.807024129, 7.4: 0.780490143, 7.3: 0.756160995, 7.2: 0.729867452, 7.1: 0.704530024, 7.0: 0.68091992, 6.9: 0.658444199, 6.8: 0.632549068, 6.7: 0.609509334}, 670: {8.0: 1.028982139, 7.8: 0.938651888, 7.6: 0.866370059, 7.5: 0.846342552, 7.4: 0.814035975, 7.3: 0.788401289, 7.2: 0.76093799, 7.1: 0.732234901, 7.0: 0.706615942, 6.9: 0.681854448, 6.8: 0.650989212, 6.7: 0.628567308}, 675: {8.0: 1.074194147, 7.8: 0.989621929, 7.6: 0.918553687, 7.5: 0.881232016, 7.4: 0.849268313, 7.3: 0.822768266, 7.2: 0.788209137, 7.1: 0.762167539, 7.0: 0.732592623, 6.9: 0.707654436, 6.8: 0.674047867, 6.7: 0.645482035}, 680: {8.0: 1.129411063, 7.8: 1.038438834, 7.6: 0.963549048, 7.5: 0.922019467, 7.4: 0.888651663, 7.3: 0.856423196, 7.2: 0.820679366, 7.1: 0.791321131, 7.0: 0.766661801, 6.9: 0.732559615, 6.8: 0.697078445, 6.7: 0.670204329}, 685: {8.0: 1.243967246, 7.8: 1.101329995, 7.6: 1.005784899, 7.5: 0.963707796, 7.4: 0.92928208, 7.3: 0.892002697, 7.2: 0.857573965, 7.1: 0.821402985, 7.0: 0.793410856, 6.9: 0.75456291, 6.8: 0.723405308, 6.7: 0.69871156}, 690: {8.0: 1.299414953, 7.8: 1.165907505, 7.6: 1.055796765, 7.5: 1.0130058, 7.4: 0.97045294, 7.3: 0.931571511, 7.2: 0.889390374, 7.1: 0.856130197, 7.0: 0.818645502, 6.9: 0.786473751, 6.8: 0.750038631, 6.7: 0.719299167}, 695: {8.0: 1.418036744, 7.8: 1.243539996, 7.6: 1.111701653, 7.5: 1.05677262, 7.4: 1.014465743, 7.3: 0.972891214, 7.2: 0.928283248, 7.1: 0.894487677, 7.0: 0.852596109, 6.9: 0.81382482, 6.8: 0.776654278, 6.7: 0.742613529}, 700: {8.0: 1.533723514, 7.8: 1.322892613, 7.6: 1.17214404, 7.5: 1.127185766, 7.4: 1.059971899, 7.3: 1.015840377, 7.2: 0.967374565, 7.1: 0.923902057, 7.0: 0.874572418, 6.9: 0.845807002, 6.8: 0.800544422, 6.7: 0.764284477}, 705: {8.0: 1.688084562, 7.8: 1.421384818, 7.6: 1.225439171, 7.5: 1.171115849, 7.4: 1.114786154, 7.3: 1.060321962, 7.2: 1.010972844, 7.1: 0.963811073, 7.0: 0.91944096, 6.9: 0.875227342, 6.8: 0.833592131, 6.7: 0.789679398}, 710: {8.0: 1.876825856, 7.8: 1.531819687, 7.6: 1.304230727, 7.5: 1.248902205, 7.4: 1.169494102, 7.3: 1.112438547, 7.2: 1.059537047, 7.1: 1.004355739, 7.0: 0.952361802, 6.9: 0.918871749, 6.8: 0.863230785, 6.7: 0.819403399}, 715: {8.0: 2.140467236, 7.8: 1.668442076, 7.6: 1.420227885, 7.5: 1.310824605, 7.4: 1.233944389, 7.3: 1.167121988, 7.2: 1.101309174, 7.1: 1.04569919, 7.0: 0.99340126, 6.9: 0.945995661, 6.8: 0.899340942, 6.7: 0.84969306}, 720: {8.0: 2.365361367, 7.8: 1.826189207, 7.6: 1.489581318, 7.5: 1.412851069, 7.4: 1.301466606, 7.3: 1.224457614, 7.2: 1.151995947, 7.1: 1.091197877, 7.0: 1.032098454, 6.9: 0.978674742, 6.8: 0.930525155, 6.7: 0.879595383}, 725: {8.0: 2.733917365, 7.8: 2.031269902, 7.6: 1.634748415, 7.5: 1.506018466, 7.4: 1.37974373, 7.3: 1.291581464, 7.2: 1.210741557, 7.1: 1.142886715, 7.0: 1.084281089, 6.9: 1.022813283, 6.8: 0.962308726, 6.7: 0.909733725}, 730: {8.0: 3.349277338, 7.8: 2.272518185, 7.6: 1.778603994, 7.5: 1.59514071, 7.4: 1.466398494, 7.3: 1.362032922, 7.2: 1.268724598, 7.1: 1.197370023, 7.0: 1.123424292, 6.9: 1.063331836, 6.8: 1.005472933, 6.7: 0.943832634}, 735: {8.0: 3.80602695, 7.8: 2.58235731, 7.6: 1.934820082, 7.5: 1.719557165, 7.4: 1.572057, 7.3: 1.447864238, 7.2: 1.345222661, 7.1: 1.257786498, 7.0: 1.181622035, 6.9: 1.109535116, 6.8: 1.045689503, 6.7: 0.977333119}, 740: {8.0: 4.698559409, 7.8: 2.953605905, 7.6: 2.142136901, 7.5: 1.854829735, 7.4: 1.684464222, 7.3: 1.540351257, 7.2: 1.422046025, 7.1: 1.328838105, 7.0: 1.230143187, 6.9: 1.15170305, 6.8: 1.085102014, 6.7: 1.01456123}, 745: {8.0: 5.586106227, 7.8: 3.471884717, 7.6: 2.408771289, 7.5: 2.08838225, 7.4: 1.835702402, 7.3: 1.660304509, 7.2: 1.515610682, 7.1: 1.391482485, 7.0: 1.299347712, 6.9: 1.212908816, 6.8: 1.13375054, 6.7: 1.053653374}, 750: {8.0: 6.773575908, 7.8: 4.07825695, 7.6: 2.678031681, 7.5: 2.298063007, 7.4: 2.003256435, 7.3: 1.786143393, 7.2: 1.617022176, 7.1: 1.47877295, 7.0: 1.361248816, 6.9: 1.275852965, 6.8: 1.171144016, 6.7: 1.092869745}, 755: {8.0: 8.76206331, 7.8: 4.932616063, 7.6: 3.091532155, 7.5: 2.613513201, 7.4: 2.230179025, 7.3: 1.949283871, 7.2: 1.743458894, 7.1: 1.57241167, 7.0: 1.451976229, 6.9: 1.329988758, 6.8: 1.213868627, 6.7: 1.141005577}, 760: {8.0: 11.02119248, 7.8: 5.982999975, 7.6: 3.644083496, 7.5: 2.960669933, 7.4: 2.48143458, 7.3: 2.134556486, 7.2: 1.881903033, 7.1: 1.683071452, 7.0: 1.526416964, 6.9: 1.39828752, 6.8: 1.289353681, 6.7: 1.184617682}, 765: {8.0: 14.57635582, 7.8: 7.42146836, 7.6: 4.248741151, 7.5: 3.487025829, 7.4: 2.835406871, 7.3: 2.392021688, 7.2: 2.071091978, 7.1: 1.817510176, 7.0: 1.64426065, 6.9: 1.491631394, 6.8: 1.357422205, 6.7: 1.242896808}, 770: {8.0: 18.06795132, 7.8: 9.248296674, 7.6: 5.164915721, 7.5: 4.01122052, 7.4: 3.239255123, 7.3: 2.691410645, 7.2: 2.276979968, 7.1: 2.000489884, 7.0: 1.752546267, 6.9: 1.576513161, 6.8: 1.422457733, 6.7: 1.300093987}, 775: {7.8: 11.76913935, 7.6: 6.408200579, 7.5: 4.869549388, 7.4: 3.81762875, 7.3: 3.09120168, 7.2: 2.562417967, 7.1: 2.207054065, 7.0: 1.919739576, 6.9: 1.693953179, 6.8: 1.505742613, 6.7: 1.371561971}, 780: {7.8: 14.92337573, 7.6: 7.840668132, 7.5: 5.957564713, 7.4: 4.493333361, 7.3: 3.553592756, 7.2: 2.887784753, 7.1: 2.431920744, 7.0: 2.080296631, 6.9: 1.825171181, 6.8: 1.614752564, 6.7: 1.446760213}, 785: {7.8: 19.26826199, 7.6: 9.71915414, 7.5: 7.19875687, 7.4: 5.429358116, 7.3: 4.214308587, 7.2: 3.351823199, 7.1: 2.762879844, 7.0: 2.333712998, 6.9: 2.009206492, 6.8: 1.745637385, 6.7: 1.546100681}, 790: {7.6: 12.37193192, 7.5: 8.931788487, 7.4: 6.597451433, 7.3: 5.013628148, 7.2: 3.894644278, 7.1: 3.140922865, 7.0: 2.590993437, 6.9: 2.197051548, 6.8: 1.890833326, 6.7: 1.652614832}, 795: {7.6: 16.11787326, 7.5: 11.5273107, 7.4: 8.209726708, 7.3: 6.121537424, 7.2: 4.653155189, 7.1: 3.677397432, 7.0: 2.982855424, 6.9: 2.45732819, 6.8: 2.080081883, 6.7: 1.795786446}, 800: {7.6: 19.8608854, 7.5: 14.63043838, 7.4: 10.26451336, 7.3: 7.49619985, 7.2: 5.589447222, 7.1: 4.316962355, 7.0: 3.405398425, 6.9: 2.780071415, 6.8: 2.318526723, 6.7: 1.950232212}, 805: {7.5: 18.22564833, 7.4: 13.03003649, 7.3: 9.393928111, 7.2: 6.891489633, 7.1: 5.199955482, 7.0: 4.042605481, 6.9: 3.226124675, 6.8: 2.608219934, 6.7: 2.174690304}, 810: {7.4: 16.55557543, 7.3: 11.77898029, 7.2: 8.550434621, 7.1: 6.286881012, 7.0: 4.779373573, 6.9: 3.738635889, 6.8: 2.965559318, 6.7: 2.420341224}, 815: {7.3: 15.06024435, 7.2: 10.76464969, 7.1: 7.85555097, 7.0: 5.820177069, 6.9: 4.488204399, 6.8: 3.455559691, 6.7: 2.772263376}, 820: {7.3: 19.3003772, 7.2: 13.54229582, 7.1: 9.687140341, 7.0: 7.093556018, 6.9: 5.327577213, 6.8: 4.047624962, 6.7: 3.178079278}, 825: {7.2: 17.45987857, 7.1: 12.32447167, 7.0: 8.905060489, 6.9: 6.671020421, 6.8: 4.880211487, 6.7: 3.751380861}, 830: {7.2: 22.43600366, 7.1: 15.68080405, 7.0: 11.15458587, 6.9: 7.920529837, 6.8: 5.94740278, 6.7: 4.448474768}, 835: {7.2: 29.15291161, 7.1: 20.78138228, 7.0: 14.19854804, 6.9: 10.52543426, 6.8: 7.299666149, 6.7: 5.406534596}, 840: {7.0: 17.99627874, 6.9: 12.49497897, 6.8: 9.01316511, 6.7: 6.566964627}, 845: {6.9: 16.68849234, 6.8: 11.43538885, 6.7: 8.215178358}, 850: {6.9: 20.87075026, 6.8: 14.48660269, 6.7: 10.28664983}, 855: {6.9: 27.18232321, 6.8: 18.72764056, 6.7: 13.15681958}, 860: {6.7: 16.61275882}}

print(ch)

class Fc:
    def average(self, lst):
        return sum(lst) / len(lst)

    def calc_fc(self, ph, orp):
        last_orp=0
        next_orp=0
        last_fc=0
        next_fc=0
        fc=[]
        for k,v in ch.items():
            if orp > k:
                last_orp=k
                pass
            else:
                next_orp=k
                break
        for k,v in ch[last_orp].items():
            print('ph: {}, key: {}, value: {} in {}, condition is: {}'.format(ph,k,v,last_orp,(ph>k)))
            if ph < k:
                last_fc=v
                pass
            else:
                next_fc=v
                fc.append(last_fc)
                fc.append(next_fc)
                break
        for k,v in ch[next_orp].items():
            print('ph: {}, key: {}, value: {} in {}, condition is: {}'.format(ph,k,v,next_orp,(ph>k)))
            if ph < k:
                last_fc=v
                pass
            else:
                next_fc=v
                fc.append(last_fc)
                fc.append(next_fc)
                break
        for i in fc:
            print(i)
        print('average: {}'.format(self.average(fc)))

        return(average(fc))



#print(d)
